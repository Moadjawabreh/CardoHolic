@model CategoryContainer

<!-- Cart -->
<div class="wrap-header-cart js-panel-cart">
	<div class="s-full js-hide-cart"></div>

	<div class="header-cart flex-col-l p-l-65 p-r-25">
		<div class="header-cart-title flex-w flex-sb-m p-b-8">
			<span class="mtext-103 cl2">
				Your Cart
			</span>

			<div class="fs-35 lh-10 cl2 p-lr-5 pointer hov-cl1 trans-04 js-hide-cart">
				<i class="zmdi zmdi-close"></i>
			</div>
		</div>

		<div class="header-cart-content flex-w js-pscroll">
			<ul class="header-cart-wrapitem w-full">
				<li class="header-cart-item flex-w flex-t m-b-12">
					<div class="header-cart-item-img">
						<img src="~/Customer/images/item-cart-01.jpg" alt="IMG">
					</div>

					<div class="header-cart-item-txt p-t-8">
						<a href="#" class="header-cart-item-name m-b-18 hov-cl1 trans-04">
							White Shirt Pleat
						</a>

						<span class="header-cart-item-info">
							1 x $19.00
						</span>
					</div>
				</li>

				<li class="header-cart-item flex-w flex-t m-b-12">
					<div class="header-cart-item-img">
						<img src="~/Customer/images/item-cart-02.jpg" alt="IMG">
					</div>

					<div class="header-cart-item-txt p-t-8">
						<a href="#" class="header-cart-item-name m-b-18 hov-cl1 trans-04">
							Converse All Star
						</a>

						<span class="header-cart-item-info">
							1 x $39.00
						</span>
					</div>
				</li>

				<li class="header-cart-item flex-w flex-t m-b-12">
					<div class="header-cart-item-img">
						<img src="~/Customer/images/item-cart-03.jpg" alt="IMG">
					</div>

					<div class="header-cart-item-txt p-t-8">
						<a href="#" class="header-cart-item-name m-b-18 hov-cl1 trans-04">
							Nixon Porter Leather
						</a>

						<span class="header-cart-item-info">
							1 x $17.00
						</span>
					</div>
				</li>
			</ul>

			<div class="w-full">
				<div class="header-cart-total w-full p-tb-40">
					Total: $75.00
				</div>

				<div class="header-cart-buttons flex-w w-full">
					<a href="shoping-cart.html" class="flex-c-m stext-101 cl0 size-107 bg3 bor2 hov-btn3 p-lr-15 trans-04 m-r-8 m-b-10">
						View Cart
					</a>

					<a href="shoping-cart.html" class="flex-c-m stext-101 cl0 size-107 bg3 bor2 hov-btn3 p-lr-15 trans-04 m-b-10">
						Check Out
					</a>
				</div>
			</div>
		</div>
	</div>
</div>


<!-- Product -->
<div class="bg0 m-t-23 p-b-140">
	<div class="container">
		<div class="flex-w flex-sb-m p-b-52">

			@* 	<div class="flex-w flex-l-m filter-tope-group m-tb-10">
			<button class="stext-106 cl6 hov1 bor3 trans-04 m-r-32 m-tb-5 how-active1"
			data-filter="*"
			onclick="filterProducts(0, 0)">
			All Products
			</button>

			@foreach (var category in Model.Item1.Categories)
			{
			<button class="stext-106 cl6 hov1 bor3 trans-04 m-r-32 m-tb-5"
			data-filter=".@category.Name"
			onclick="filterProducts(@category.ID, Model.Item1.Id)">
			@category.Name
			</button>
			}
			</div> *@




			<div class="flex-w flex-l-m filter-tope-group m-tb-10">

				<button class="stext-106 cl6 hov1 bor3 trans-04 m-r-32 m-tb-5 how-active1"
						data-filter="*">
					All Products
				</button>

				@foreach (var category in Model.Categories)
				{


					<button class="stext-106 cl6 hov1 bor3 trans-04 m-r-32 m-tb-5 how-active1"
							data-filter=".@category.Name">
						@category.Name
					</button>



				}
			</div>


			@* 	<div class="flex-w flex-l-m filter-tope-group m-tb-10">

			<form id="filterForm" method="get" action="@Url.Action("Products", "Customer")">
			<input type="hidden" name="id" id="filterId" value="yourDefaultValue" />
			</form>

			<button class="stext-106 cl6 hov1 bor3 trans-04 m-r-32 m-tb-5 how-active1" onclick="submitFilterForm('*')">
			All Products
			</button>

			<form id="filterForm" method="post" action="@Url.Action("Products", "Customer")">
			@foreach (var category in Model.Item1.Categories)
			{
			<button class="stext-106 cl6 hov1 bor3 trans-04 m-r-32 m-tb-5 how-active1" data-filter="@category.ID" onclick="submitFilterForm(@category.ID, @category.CategoryContainerID)">
			@category.Name
			</button>
			<input type="hidden" name="IdForCategory" value="@category.ID" id="categoryId" />
			<input type="hidden" name="IdForContainerCategory" value="@category.CategoryContainerID" id="containerId" />
			}
			</form>


			</div>
			*@

			<div class="flex-w flex-c-m m-tb-10">


				<div class="flex-c-m stext-106 cl6 size-105 bor4 pointer hov-btn3 trans-04 m-tb-4 js-show-search">
					<i class="icon-search cl2 m-r-6 fs-15 trans-04 zmdi zmdi-search"></i>
					<i class="icon-close-search cl2 m-r-6 fs-15 trans-04 zmdi zmdi-close dis-none"></i>
					Search
				</div>
			</div>

			<!-- Search product -->
			@* <div class="dis-none panel-search w-full p-t-10 p-b-15">
			<div class="bor8 dis-flex p-l-15">
			<button class="size-113 flex-c-m fs-16 cl2 hov-cl1 trans-04">
			<i class="zmdi zmdi-search"></i>
			</button>

			<input class="mtext-107 cl2 size-114 plh2 p-r-15" type="text" name="search-product" placeholder="Search">
			</div>
			</div>
			*@


			<div class="dis-none panel-search w-full p-t-10 p-b-15">
				<div class="bor8 dis-flex p-l-15">
					<button onclick="filterProductsBySearch()" class="size-113 flex-c-m fs-16 cl2 hov-cl1 trans-04">
						<i class="zmdi zmdi-search"></i>
					</button>

					<input id="searchInput" class="mtext-107 cl2 size-114 plh2 p-r-15" type="text" placeholder="Search">
				</div>
			</div>

			<!-- Filter -->

		</div>




		<div class="row isotope-grid">

			@foreach (var category in Model.Categories)
			{
				@foreach (var product in category.Products)
				{
					
						<div class="col-sm-6 col-md-4 col-lg-3 p-b-35 isotope-item @product.Category.Name">
							<!-- Block2 -->
							<div class="block2">
								<div class="block2-pic hov-img0">
									<img src="@Url.Content(product.UrlImage)" alt="IMG-PRODUCT">

									<a asp-controller="Customer" asp-action="SingleProduct" asp-route-id="@product.ID" class="block2-btn flex-c-m stext-103 cl2 size-102 bg0 bor2 hov-btn1 p-lr-15 trans-04 ">
										Quick View
									</a>
								</div>

								<div class="block2-txt flex-w flex-t p-t-14">
									<div class="block2-txt-child1 flex-col-l ">
										<a class="stext-104 cl4 hov-cl1 trans-04 js-name-b2 p-b-6">
											@product.Name
										</a>


									@if (product.percentageOfDiscount == 1)
									{
										<span class="stext-105 cl3">
											$@product.Price.ToString("0.00")
										</span>
									}

									else
									{

										var discountedPrice = product.Price * (1 - product.percentageOfDiscount);
										var formattedDiscountedPrice = discountedPrice.ToString("0.00");


										<span class="stext-105 cl3">
											$@formattedDiscountedPrice
										</span>
									}
										@* <span class="stext-105 cl3">
											
											@product.Price

										</span> *@
									</div>

									<div class="block2-txt-child2 flex-r p-t-3">
									</div>
								</div>
							</div>
						</div>

					
				}
			}
		</div>






	




		<!-- Load more -->
	</div>
</div>


<!-- Back to top -->
<div class="btn-back-to-top" id="myBtn">
	<span class="symbol-btn-back-to-top">
		<i class="zmdi zmdi-chevron-up"></i>
	</span>
</div>




@* <script>
	function filterProducts(categoryId, containerCategoryId) {
		window.location.href = '/Customer/Products?IdForCategory=' + categoryId + '&IdForContainerCategory=' + containerCategoryId;
	}
</script>
 *@
<script>
	function submitFilterForm(categoryId, containerId) {
		document.getElementById('categoryId').value = categoryId;
		document.getElementById('containerId').value = containerId;
		document.getElementById('filterForm').submit();
	}
</script>


@* <script>
	function filterProductsBySearch() {
		var searchTerm = document.getElementById('searchInput').value.toLowerCase();

		// Loop through each product item and toggle visibility based on search term
		var productItems = document.querySelectorAll('.isotope-item');
		productItems.forEach(function (item) {
			var productName = item.getAttribute('data-product-name').toLowerCase();

			if (productName.includes(searchTerm)) {
				item.style.display = 'block';
			} else {
				item.style.display = 'none';
			}
		});
	}
</script>
 *@



